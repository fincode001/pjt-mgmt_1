<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>프로젝트 관리 시스템 - 최적화 버전</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/optimization.css">
</head>
<body>
  <!-- 헤더 -->
  <header>
    <div class="container header-flex">
      <div class="logo">
        <img src="https://public.youware.com/users-website-assets/prod/390865ac-0750-43f9-bbd7-a9ab75350c72/g453cbe7b2f1d85e975cdc6060ff85ce14472a5ceefab7895be5cc34ad7d064edfab33405af6bda843c2f86c256b9dae94e862a1e429c2f867ef976699d1a7b9d_640.jpg" alt="로고">
        <span>프로젝트 관리 시스템</span>
      </div>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html" class="active"><i class="fas fa-home"></i> 홈</a></li>
          <li><a href="project-list.html"><i class="fas fa-list"></i> 프로젝트 목록</a></li>
          <li><a href="dashboard.html"><i class="fas fa-chart-line"></i> 대시보드</a></li>
          <li><a href="pages/settings.html"><i class="fas fa-cog"></i> 설정</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- 메인 콘텐츠 -->
  <div class="main-wrapper">
    <!-- 사이드바 -->
    <aside class="sidebar">
      <ul class="sidebar-menu">
        <li><a href="index.html" class="active"><i class="fas fa-plus-circle"></i> 신규 프로젝트</a></li>
        <li><a href="project-list.html"><i class="fas fa-list"></i> 프로젝트 목록</a></li>
        <li><a href="dashboard.html"><i class="fas fa-chart-line"></i> 대시보드</a></li>
        <li><a href="pages/folder-management.html"><i class="fas fa-folder"></i> 작업 폴더 관리</a></li>
        <li><a href="pages/environment-info.html"><i class="fas fa-cog"></i> 환경 정보</a></li>
        <li><a href="pages/reference-url.html"><i class="fas fa-link"></i> 참고 URL 관리</a></li>
        <li><a href="pages/mcp-servers.html"><i class="fas fa-server"></i> MCP 서버 리스트</a></li>
        <li><a href="project-relationship.html"><i class="fas fa-project-diagram"></i> 프로젝트 관계도</a></li>
      </ul>
    </aside>

    <!-- 본문 영역 -->
    <main class="main-content">
      <h2>신규 프로젝트 등록</h2>
      <div id="auto-save-indicator" style="display: none; background-color: #f8f9fa; padding: 5px 10px; border-radius: 4px; color: #2c3e50; position: fixed; top: 20px; right: 20px; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">저장 중...</div>
      
      <!-- 단계 표시기 -->
      <div class="form-steps">
        <div class="form-step active">
          <div class="step-number">1</div>
          <div class="step-label">기본 정보</div>
        </div>
        <div class="form-step">
          <div class="step-number">2</div>
          <div class="step-label">프로젝트 관계성</div>
        </div>
        <div class="form-step">
          <div class="step-number">3</div>
          <div class="step-label">상태 및 일정</div>
        </div>
        <div class="form-step">
          <div class="step-number">4</div>
          <div class="step-label">담당자 정보</div>
        </div>
        <div class="form-step">
          <div class="step-number">5</div>
          <div class="step-label">파일 및 자원</div>
        </div>
      </div>

      <form id="project-form" class="enhanced-form">
        <!-- 단계 1: 기본 정보 -->
        <div class="form-step-content">
          <!-- 프로젝트 제목 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-pen header-icon"></i> 프로젝트 제목</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <input type="text" id="project-title" class="form-control" placeholder="프로젝트 제목을 입력하세요" required>
              </div>
            </div>
          </div>

          <!-- 프로젝트 코드 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-hashtag header-icon"></i> 프로젝트 코드</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="code-generator">
                <div class="form-group">
                  <label for="project-year">연도</label>
                  <input type="text" id="project-year" name="project-year" class="form-control" value="2025" maxlength="4">
                </div>
                <div class="form-group">
                  <label for="project-category">분류</label>
                  <select id="project-category" name="project-category" class="form-control">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="project-major-class">대분류</label>
                  <select id="project-major-class" name="project-major-class" class="form-control">
                    <option value="01">01</option>
                    <option value="02">02</option>
                    <option value="03">03</option>
                    <option value="04">04</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="project-minor-class">중분류</label>
                  <select id="project-minor-class" name="project-minor-class" class="form-control">
                    <option value="001">001</option>
                    <option value="002">002</option>
                    <option value="003">003</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="project-version">버전</label>
                  <input type="text" id="project-version" name="project-version" class="form-control" value="0.1">
                </div>
              </div>
              <div class="form-group">
                <label>생성된 코드</label>
                <div id="project-code-result" class="generated-code">2025-A-01-001-Ver0.1</div>
              </div>
            </div>
          </div>

          <!-- 프로젝트 개요 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-align-left header-icon"></i> 프로젝트 개요</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <textarea id="project-overview" name="project-overview" class="form-control" rows="5" placeholder="본 프로젝트의 개요를 작성해주세요" required></textarea>
              </div>
            </div>
          </div>

          <!-- 프로젝트 중요도/긴급도 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-exclamation-circle header-icon"></i> 프로젝트 중요도 및 긴급도</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="rating-container">
                <div class="rating-label">중요도</div>
                <div class="rating-stars">
                  <div class="rating-value rating-value-1 selected" data-value="1" data-target="importance-value">1</div>
                  <div class="rating-value rating-value-2" data-value="2" data-target="importance-value">2</div>
                  <div class="rating-value rating-value-3" data-value="3" data-target="importance-value">3</div>
                  <div class="rating-value rating-value-4" data-value="4" data-target="importance-value">4</div>
                  <div class="rating-value rating-value-5" data-value="5" data-target="importance-value">5</div>
                  <input type="hidden" name="importance" id="importance-value" value="1">
                </div>
              </div>
              
              <div class="rating-container">
                <div class="rating-label">긴급도</div>
                <div class="rating-stars">
                  <div class="rating-value rating-value-1 selected" data-value="1" data-target="urgency-value">1</div>
                  <div class="rating-value rating-value-2" data-value="2" data-target="urgency-value">2</div>
                  <div class="rating-value rating-value-3" data-value="3" data-target="urgency-value">3</div>
                  <div class="rating-value rating-value-4" data-value="4" data-target="urgency-value">4</div>
                  <div class="rating-value rating-value-5" data-value="5" data-target="urgency-value">5</div>
                  <input type="hidden" name="urgency" id="urgency-value" value="1">
                </div>
              </div>
            </div>
          </div>

          <div class="form-navigation">
            <div></div>
            <button type="button" class="btn btn-next">다음 <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- 단계 2: 프로젝트 관계성 -->
        <div class="form-step-content" style="display: none;">
          <!-- 프로젝트 관계성 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-project-diagram header-icon"></i> 프로젝트 관계성</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div id="project-relationships">
                <!-- 관계성 항목이 여기에 추가됩니다 -->
              </div>
              <button type="button" id="add-relationship" class="btn btn-primary">
                <i class="fas fa-plus"></i> 관계성 추가하기
              </button>
            </div>
          </div>

          <div class="form-navigation">
            <button type="button" class="btn btn-prev"><i class="fas fa-arrow-left"></i> 이전</button>
            <button type="button" class="btn btn-next">다음 <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- 단계 3: 상태 및 일정 -->
        <div class="form-step-content" style="display: none;">
          <!-- 프로젝트 상태 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-tasks header-icon"></i> 프로젝트 상태</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="status-selector">
                <label class="status-option status-not-started selected">
                  <input type="radio" name="project-status" value="not-started" checked>
                  <div class="status-icon"><i class="fas fa-clock"></i></div>
                  <div class="status-label">미착수</div>
                </label>
                <label class="status-option status-in-progress">
                  <input type="radio" name="project-status" value="in-progress">
                  <div class="status-icon"><i class="fas fa-spinner"></i></div>
                  <div class="status-label">진행중</div>
                </label>
                <label class="status-option status-on-hold">
                  <input type="radio" name="project-status" value="on-hold">
                  <div class="status-icon"><i class="fas fa-pause"></i></div>
                  <div class="status-label">보류중단</div>
                </label>
                <label class="status-option status-completed">
                  <input type="radio" name="project-status" value="completed">
                  <div class="status-icon"><i class="fas fa-check-circle"></i></div>
                  <div class="status-label">종료</div>
                </label>
              </div>
              
              <div class="progress-container">
                <div class="progress-header">
                  <div class="progress-title">진척률</div>
                  <div class="progress-value">0%</div>
                </div>
                <div class="enhanced-progress">
                  <div class="progress-bar" style="width: 0%"></div>
                </div>
                <input type="range" id="project-progress" name="project-progress" min="0" max="100" value="0" step="5" style="width: 100%; margin-top: 10px;">
                <div class="progress-comparison">
                  <span class="progress-actual">실제: 0%</span>
                  <span class="progress-expected">예상: 0%</span>
                </div>
              </div>
            </div>
          </div>

          <!-- 프로젝트 일정 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-calendar-alt header-icon"></i> 프로젝트 일정</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <label>프로젝트 추진 일정</label>
                <div class="date-range">
                  <input type="date" id="project-start-date" name="project-start-date" class="form-control" required>
                  <span class="separator">~</span>
                  <input type="date" id="project-end-date" name="project-end-date" class="form-control" required>
                </div>
              </div>
              <div class="form-group">
                <label for="project-reception-date">프로젝트 접수일</label>
                <input type="datetime-local" id="project-reception-date" name="project-reception-date" class="form-control" required>
              </div>
              <div class="form-group">
                <label>일정 경과율</label>
                <div class="progress-display">
                  <div class="progress-bar">
                    <div class="progress-fill" id="schedule-progress" style="width: 0%" data-progress="0"></div>
                  </div>
                  <span class="progress-text" id="schedule-progress-text">0% 경과</span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-navigation">
            <button type="button" class="btn btn-prev"><i class="fas fa-arrow-left"></i> 이전</button>
            <button type="button" class="btn btn-next">다음 <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- 단계 4: 담당자 정보 -->
        <div class="form-step-content" style="display: none;">
          <!-- 프로젝트 제공자/전달자 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-users header-icon"></i> 프로젝트 담당자 정보</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="form-row">
                <div class="form-col">
                  <div class="form-group">
                    <label for="project-provider">프로젝트 제공자</label>
                    <div class="input-group">
                      <input type="text" id="project-provider" name="project-provider" class="form-control" placeholder="이름" required>
                      <button type="button" class="btn btn-primary btn-search" onclick="openModal('provider-search')">
                        <i class="fas fa-search"></i>
                      </button>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="project-provider-email">제공자 이메일</label>
                    <input type="email" id="project-provider-email" name="project-provider-email" class="form-control" placeholder="이메일">
                  </div>
                </div>
                <div class="form-col">
                  <div class="form-group">
                    <label for="project-deliverer">프로젝트 전달자</label>
                    <div class="input-group">
                      <input type="text" id="project-deliverer" name="project-deliverer" class="form-control" placeholder="이름" required>
                      <button type="button" class="btn btn-primary btn-search" onclick="openModal('deliverer-search')">
                        <i class="fas fa-search"></i>
                      </button>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="project-deliverer-email">전달자 이메일</label>
                    <input type="email" id="project-deliverer-email" name="project-deliverer-email" class="form-control" placeholder="이메일">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="form-navigation">
            <button type="button" class="btn btn-prev"><i class="fas fa-arrow-left"></i> 이전</button>
            <button type="button" class="btn btn-next">다음 <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- 단계 5: 파일 및 자원 -->
        <div class="form-step-content" style="display: none;">
          <!-- 작업 폴더 등록 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-folder-open header-icon"></i> 작업 폴더 등록</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="enhanced-upload-area" id="file-drop-area">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <div class="upload-title">파일을 여기에 끌어다 놓거나 클릭하여 업로드하세요</div>
                <div class="upload-description">최대 50MB까지 업로드 가능합니다. 여러 파일을 한 번에 선택할 수 있습니다.</div>
                <input type="file" id="file-upload" style="display: none;" multiple>
              </div>
              <div id="enhanced-file-list" class="file-list">
                <!-- 업로드된 파일 목록이 여기에 표시됩니다 -->
              </div>
            </div>
          </div>

          <!-- 환경 정보 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-cogs header-icon"></i> 필요한 환경 정보</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <select id="env-info" name="env-info" class="form-control" multiple>
                  <option value="db">데이터베이스 접근 정보</option>
                  <option value="api">API 키</option>
                  <option value="cloud">클라우드 서비스 계정</option>
                  <option value="server">서버 인증 정보</option>
                </select>
              </div>
            </div>
          </div>

          <!-- 참고 URL -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-link header-icon"></i> 참고 URL</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div id="reference-urls">
                <div class="form-row mb-10">
                  <div class="form-col">
                    <input type="text" class="form-control" name="ref-title[]" placeholder="사이트명/유튜브 제목">
                  </div>
                  <div class="form-col">
                    <div class="input-group">
                      <input type="url" class="form-control" name="ref-url[]" placeholder="URL">
                      <button type="button" class="btn btn-danger btn-search" onclick="removeUrl(this)">
                        <i class="fas fa-times"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-primary" id="add-url">
                <i class="fas fa-plus"></i> URL 추가
              </button>
            </div>
          </div>

          <!-- MCP 서버 리스트 -->
          <div class="form-section">
            <div class="form-header">
              <span><i class="fas fa-server header-icon"></i> MCP 서버 리스트</span>
              <button type="button" class="toggle-section"><i class="fas fa-chevron-up"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <select id="mcp-servers" name="mcp-servers" class="form-control" multiple>
                  <option value="server1">서버 1</option>
                  <option value="server2">서버 2</option>
                  <option value="server3">서버 3</option>
                  <option value="server4">서버 4</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-navigation">
            <button type="button" class="btn btn-prev"><i class="fas fa-arrow-left"></i> 이전</button>
            <button type="submit" class="btn btn-submit">프로젝트 등록 <i class="fas fa-check"></i></button>
          </div>
        </div>
      </form>
    </main>
  </div>

  <!-- 모달: 제공자 검색 -->
  <div id="provider-search" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal('provider-search')">&times;</span>
      <h3>제공자 검색</h3>
      <div class="form-group">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="이름 검색">
          <button class="btn btn-primary btn-search">검색</button>
        </div>
      </div>
      <div class="search-results">
        <ul>
          <li data-email="hong@naver.com" onclick="selectPerson('provider', '홍길동', 'hong@naver.com')">홍길동 (hong@naver.com)</li>
          <li data-email="kim@gmail.com" onclick="selectPerson('provider', '김철수', 'kim@gmail.com')">김철수 (kim@gmail.com)</li>
          <li data-email="park@naver.com" onclick="selectPerson('provider', '박민수', 'park@naver.com')">박민수 (park@naver.com)</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- 모달: 전달자 검색 -->
  <div id="deliverer-search" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal('deliverer-search')">&times;</span>
      <h3>전달자 검색</h3>
      <div class="form-group">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="이름 검색">
          <button class="btn btn-primary btn-search">검색</button>
        </div>
      </div>
      <div class="search-results">
        <ul>
          <li data-email="lee@gmail.com" onclick="selectPerson('deliverer', '이영희', 'lee@gmail.com')">이영희 (lee@gmail.com)</li>
          <li data-email="choi@naver.com" onclick="selectPerson('deliverer', '최재민', 'choi@naver.com')">최재민 (choi@naver.com)</li>
          <li data-email="jung@gmail.com" onclick="selectPerson('deliverer', '정수아', 'jung@gmail.com')">정수아 (jung@gmail.com)</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- 푸터 -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>프로젝트 관리 시스템</h3>
          <p>체계적인 프로젝트 관리를 위한 종합 솔루션</p>
        </div>
        <div class="footer-section">
          <h3>바로가기</h3>
          <div class="footer-links">
            <a href="index.html">홈</a>
            <a href="project-list.html">프로젝트 목록</a>
            <a href="dashboard.html">대시보드</a>
            <a href="#">설정</a>
          </div>
        </div>
        <div class="footer-section">
          <h3>고객지원</h3>
          <p>이메일: support@projectsystem.co.kr</p>
          <p>전화: 02-123-4567</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 프로젝트 관리 시스템. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <script src="js/main.js"></script>
  <script src="js/form-optimization.js"></script>
</body>
</html>